---
title: "Funcion para leer audios"
author: "Florencia Pellegrini"
date: "2025-12-14"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
install.packages("av")
install.packages("tuneR")

library(av)
library(tuneR)
library(seewave)
```

Hago la función para convertir los audios de m4a a wav. Además, hago que guarde los audios ya transformados en una nueva carpeta: Audios_finales_conv
```{r}
convertir_m4a_a_wave <- function(input_m4a, sample_rate = 16000) {
  #creo la carpeta de salida en caso que no exista aun
  dir.create("Audios_finales_conv", showWarnings = FALSE)
  
  base_name <- tools::file_path_sans_ext(basename(input_m4a)) #nombre archivo
  
  output_wav <- file.path("Audios_finales_conv", paste0(base_name, ".wav"))
  
  av_audio_convert(
    input_m4a,        #archivo de entrada
    output_wav,       #archivo de salida
    channels    = 1,
    sample_rate = sample_rate
  )
  
  return(output_wav)
}

#Carpeta donde están los audios
input_dir <- "Audios_finales_orig"

m4a_files <- list.files(
  path       = input_dir,
  pattern    = "\\.m4a$",
  recursive  = TRUE,     
  full.names = TRUE
)

rutas_wav <- sapply(m4a_files, convertir_m4a_a_wave)

#IMPORTANTE: LOS AUDIOS IA NO LOS COGE PORQUE YA ESTAN EN WAV. 
```

Hago una prueba de que guarda bien los audios.
```{r}
mar<-readWave('Audios_finales_conv/MAngeles af3.wav')
plot(mar)
```



